---
title: "Test case Rainfall pipeline La Corona"
format: html
editor: visual
---

## Introduction

This notebook demonstrates the different functions that have been developed to analyse and check the field data from La Corona, based on the original work from Prof Chip Cheshier and Prof Francois Birgand at North Carolina State University.

Scripts and functions have been developed as part of FPTA 358 funded by INIA Uy.

This document specifically focuses on the analysis of the rainfall data

## packages

To be able to run this notebook, the following R packages should be available

```{r}
library(tidyverse)
library(plotly)
library(readxl)
library(htmlwidgets)
```

## Loading the developed functions

The functions are stored in the scripts folder, the same folder as the code version of this file (the \*.qmd file).

```{r loadfunctions}
source("Functions_Rain.R")

```

We can now list all the functions that have been loaded using:

```{r listfunctions}
print(lsf.str())
```

## Testing the different functions

The first test is using the automatic file read function. The `read_list_files` function will read a list of files from the directory given. It is embedded in the `process_rain_data_auto` function, but first the functionality will be demonstrated.

```{r read_file_list}
files <- read_list_files("../Rain")
files
```

The list that has been generated by this function can be used to read in the different rainfall files using the `read_data_file` function. Again, this is embedded in a loop in the overall `process_rain_data_auto` function, but here is the functionality.

```{r showreaddata}
name <- files$names[[1]][1]
file_path <- files$paths[[which(files$names[[1]]==name)]]

test_data <- read_data_file(name, file_path)
test_data

```
We can now test the full functionality of `process_rain_data_auto` on the files

First we try with the first file in the directory

```{r}
name <- files$names[[1]][1]
file_path_in <- files$paths[[which(files$names[[1]]==name)]]

test_files <- process_rain_data_auto(file_path = file_path_in[1])
```

